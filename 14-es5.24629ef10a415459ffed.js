(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{aAsz:function(e,t,n){"use strict";n.r(t);var o=n("CcnG"),r=function(){return function(){}}(),i=n("pMnS"),a=n("Ip0R"),s=n("ZZ/e"),c=n("dnTq"),u=n("fjz4"),g=n("iw74"),d=function(){function e(e,t,n){this.storage=e,this.loginViewService=t,this.routerService=n}return e.prototype.canActivate=function(){var e=this;return this.storage.get("userInfo").then((function(t){return e.loginViewService.userInfo=t,!(!e.loginViewService.userInfo||!e.loginViewService.userInfo.is_staff)||(e.routerService.toLogin().then(),!1)}))},e.ngInjectableDef=o.Sb({factory:function(){return new e(o.Tb(g.b),o.Tb(c.a),o.Tb(u.a))},token:e,providedIn:"root"}),e}(),f=n("xWuP"),l=n("w8xc"),h=n("7ErT"),p=n("A7o+"),b=n("gIcY"),v=function(){function e(e,t){this.goodsCategoryService=e,this.fb=t}return e.prototype.initViewService=function(){this.initForm(),this.getCategoryList()},e.prototype.initForm=function(){this.formGroup=this.fb.group({name:["",b.o.required],name_vn:[""],code:[""],category_type:[],parent_category:[],is_tab:[!1],desc:[],category_picture:[]})},e.prototype.getCategoryList=function(){var e=this;this.goodsCategoryService.getGoodsCategoryList().subscribe((function(t){e.goodsCategoryList=t.results}))},e.prototype.onChange=function(e){if(e.target.files.length>0){var t=e.target.files[0];this.formGroup.get("category_picture").setValue(t)}},e.prototype.onSubmit=function(){var e=new FormData;e.append("name",this.formGroup.get("name").value),e.append("name_vn",this.formGroup.get("name_vn").value),e.append("code",this.formGroup.get("code").value),e.append("category_type",this.formGroup.get("category_type").value),e.append("parent_category",this.formGroup.get("parent_category").value),e.append("is_tab",this.formGroup.get("is_tab").value),e.append("desc",this.formGroup.get("desc").value),e.append("category_picture",this.formGroup.get("category_picture").value),this.goodsCategoryService.addGoodsCategory(e).subscribe((function(){console.log("\u6dfb\u52a0\u5546\u54c1\u7c7b\u522b\u6210\u529f")}))},e.ngInjectableDef=o.Sb({factory:function(){return new e(o.Tb(l.a),o.Tb(b.d))},token:e,providedIn:"root"}),e}(),y=function(){function e(){}return e.forChild=function(){return{ngModule:e,providers:[d,f.a,v]}},e}(),S=n("ZYCi"),m=function(){function e(e,t,n){this.storage=e,this.loginViewService=t,this.routerService=n}return e.prototype.canActivate=function(){var e=this;return this.storage.get("userInfo").then((function(t){return e.loginViewService.userInfo=t,!(!e.loginViewService.userInfo||!e.loginViewService.userInfo.is_staff)||(e.routerService.toLogin().then(),!1)}))},e.ngInjectableDef=o.Sb({factory:function(){return new e(o.Tb(g.b),o.Tb(c.a),o.Tb(u.a))},token:e,providedIn:"root"}),e}(),I=function(){function e(e,t,n){this.storage=e,this.loginViewService=t,this.routerService=n}return e.prototype.canActivate=function(){var e=this;return this.storage.get("userInfo").then((function(t){return e.loginViewService.userInfo=t,!(!e.loginViewService.userInfo||!e.loginViewService.userInfo.is_staff)||(e.routerService.toLogin().then(),!1)}))},e.ngInjectableDef=o.Sb({factory:function(){return new e(o.Tb(g.b),o.Tb(c.a),o.Tb(u.a))},token:e,providedIn:"root"}),e}(),C=function(){function e(e,t,n){this.storage=e,this.loginViewService=t,this.routerService=n}return e.prototype.canActivate=function(){var e=this;return this.storage.get("userInfo").then((function(t){return e.loginViewService.userInfo=t,!(!e.loginViewService.userInfo||!e.loginViewService.userInfo.is_staff)||(e.routerService.toLogin().then(),!1)}))},e.ngInjectableDef=o.Sb({factory:function(){return new e(o.Tb(g.b),o.Tb(c.a),o.Tb(u.a))},token:e,providedIn:"root"}),e}(),w=function(){function e(e,t,n){this.storage=e,this.loginViewService=t,this.routerService=n}return e.prototype.canActivate=function(){var e=this;return this.storage.get("userInfo").then((function(t){return e.loginViewService.userInfo=t,!(!e.loginViewService.userInfo||!e.loginViewService.userInfo.is_staff)||(e.routerService.toLogin().then(),!1)}))},e.ngInjectableDef=o.Sb({factory:function(){return new e(o.Tb(g.b),o.Tb(c.a),o.Tb(u.a))},token:e,providedIn:"root"}),e}(),A=function(){function e(e,t,n){this.storage=e,this.loginViewService=t,this.routerService=n}return e.prototype.canActivate=function(){var e=this;return this.storage.get("userInfo").then((function(t){return e.loginViewService.userInfo=t,!(!e.loginViewService.userInfo||!e.loginViewService.userInfo.is_staff)||(e.routerService.toLogin().then(),!1)}))},e.ngInjectableDef=o.Sb({factory:function(){return new e(o.Tb(g.b),o.Tb(c.a),o.Tb(u.a))},token:e,providedIn:"root"}),e}(),T=function(){return Promise.all([n.e(1),n.e(0),n.e(17)]).then(n.bind(null,"8FR7")).then((function(e){return e.AdminCategoryListPageModuleNgFactory}))},L=function(){return Promise.all([n.e(1),n.e(20)]).then(n.bind(null,"ajhP")).then((function(e){return e.AdminGoodsInfoListPageModuleNgFactory}))},D=function(){return Promise.all([n.e(1),n.e(22)]).then(n.bind(null,"RbhX")).then((function(e){return e.AdminGoodsSkuListPageModuleNgFactory}))},G=function(){return Promise.all([n.e(1),n.e(19)]).then(n.bind(null,"L++q")).then((function(e){return e.AdminGoodsInListPageModuleNgFactory}))},V=function(){return Promise.all([n.e(1),n.e(21)]).then(n.bind(null,"+G94")).then((function(e){return e.AdminGoodsOutListPageModuleNgFactory}))},_=function(){return Promise.all([n.e(1),n.e(23)]).then(n.bind(null,"bMr1")).then((function(e){return e.AdminUsersListPageModuleNgFactory}))},P=function(){return Promise.all([n.e(1),n.e(0),n.e(15)]).then(n.bind(null,"T5oq")).then((function(e){return e.AdminCategoryAddPageModuleNgFactory}))},j=function(){return n.e(18).then(n.bind(null,"4wN7")).then((function(e){return e.AdminCategoryUpdatePageModuleNgFactory}))},x=function(){return Promise.all([n.e(1),n.e(0),n.e(16)]).then(n.bind(null,"7nlW")).then((function(e){return e.AdminCategoryEditPageModuleNgFactory}))},F=function(){return function(){}}();n.d(t,"AdminModuleNgFactory",(function(){return M}));var M=o.qb(r,[],(function(e){return o.Cb([o.Db(512,o.j,o.bb,[[8,[i.a]],[3,o.j],o.x]),o.Db(4608,a.n,a.m,[o.u,[2,a.B]]),o.Db(4608,s.b,s.b,[o.z,o.g]),o.Db(4608,s.Ib,s.Ib,[s.b,o.j,o.q]),o.Db(4608,s.Mb,s.Mb,[s.b,o.j,o.q]),o.Db(4608,d,d,[g.b,c.a,u.a]),o.Db(4608,f.a,f.a,[l.a,u.a,h.a,p.j,s.a]),o.Db(4608,v,v,[l.a,b.d]),o.Db(1073742336,a.b,a.b,[]),o.Db(1073742336,s.Fb,s.Fb,[]),o.Db(1073742336,y,y,[]),o.Db(1073742336,S.o,S.o,[[2,S.t],[2,S.m]]),o.Db(1073742336,F,F,[]),o.Db(1073742336,r,r,[]),o.Db(1024,S.k,(function(){return[[{path:"admin-category-list",canActivate:[d],loadChildren:T},{path:"admin-goods-info-list",canActivate:[m],loadChildren:L},{path:"admin-goods-sku-list",canActivate:[I],loadChildren:D},{path:"admin-goods-in-list",canActivate:[C],loadChildren:G},{path:"admin-goods-out-list",canActivate:[w],loadChildren:V},{path:"admin-users-list",canActivate:[A],loadChildren:_},{path:"admin-category-add",loadChildren:P},{path:"admin-category-update",loadChildren:j},{path:"admin-category-edit/:id",loadChildren:x}]]}),[])])}))},xWuP:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n("mrSG"),r=n("w8xc"),i=n("fjz4"),a=n("7ErT"),s=n("ZZ/e"),c=n("CcnG"),u=n("A7o+"),g=function(){function e(e,t,n,o,r){this.goodsCategoryService=e,this.routerService=t,this.constantService=n,this.translateService=o,this.actionSheetController=r,this.goodsCategoryList=[],this.scrollDisabled=!1,this.loading=!1,this.pageSize=20,this.pageIndex=1}return e.prototype.initAdminCategoryListView=function(){this.pageIndex=1,this.goodsCategoryList=[],this.loadData()},e.prototype.loadData=function(e){var t=this;this.loading=!0,setTimeout((function(){t.goodsCategoryService.getGoodsCategoryList(t.pageIndex).subscribe((function(n){t.pageIndex=t.pageIndex+1;for(var o=0,r=n.results;o<r.length;o++)t.goodsCategoryList.push(r[o]);t.loading=!1,t.goodsCategoryList.length===n.count&&(t.scrollDisabled=!0),e&&e.target.complete()}))}),500)},e.prototype.toGoodsInfoList=function(e){this.routerService.toAdminGoodsInfoList().then()},e.prototype.toCategoryAdd=function(){this.routerService.toAdminCategoryAdd().then()},e.prototype.toCategoryEdit=function(e){this.selectGoodsCategory=e,this.routerService.toAdminCategoryEdit(e.id).then()},e.prototype.doRefresh=function(e){var t=this;this.loading=!0,this.pageIndex=1,setTimeout((function(){t.goodsCategoryService.getGoodsCategoryList(t.pageIndex).subscribe((function(n){t.pageIndex=t.pageIndex+1,t.goodsCategoryList=n.results,t.scrollDisabled=t.goodsCategoryList.length===n.count,t.loading=!1,e.target.complete(),t.constantService.presentToast("\u5237\u65b0\u6210\u529f\uff01").then()}))}),200)},e.prototype.deleteGoodsCategory=function(e){var t=this;this.goodsCategoryService.deleteGoodsCategory(e.id).subscribe((function(n){t.goodsCategoryList=t.goodsCategoryList.filter((function(t){if(t!==e)return t})),t.constantService.presentToast(t.translateService.instant("admin-category-list.deleteSuccess")).then()}))},e.prototype.presentActionSheet=function(e){return o.b(this,void 0,void 0,(function(){var t=this;return o.e(this,(function(n){switch(n.label){case 0:return[4,this.actionSheetController.create({header:e.name+"("+e.name_vn+")",buttons:[{text:this.translateService.instant("admin-category-list.edit"),icon:"create",handler:function(){t.toCategoryEdit(e)}},{text:this.translateService.instant("admin-category-list.delete"),role:"destructive",icon:"trash",handler:function(){t.deleteGoodsCategory(e)}},{text:this.translateService.instant("admin-category-list.cancel"),icon:"close",role:"cancel"}]})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}}))}))},e.ngInjectableDef=c.Sb({factory:function(){return new e(c.Tb(r.a),c.Tb(i.a),c.Tb(a.a),c.Tb(u.j),c.Tb(s.a))},token:e,providedIn:"root"}),e}()}}]);