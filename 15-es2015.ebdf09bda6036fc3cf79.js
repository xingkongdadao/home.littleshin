(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{aAsz:function(e,t,i){"use strict";i.r(t);var o=i("8Y7J");class r{}var n=i("pMnS"),s=i("SVse"),a=i("ZZ/e"),c=i("dnTq"),d=i("fjz4"),g=i("xgBC");let h=(()=>{class e{constructor(e,t,i){this.storage=e,this.loginViewService=t,this.routerService=i}canActivate(){return this.storage.get("userInfo").then(e=>(this.loginViewService.userInfo=e,!(!this.loginViewService.userInfo||!this.loginViewService.userInfo.is_staff)||(this.routerService.toLogin().then(),!1)))}}return e.ngInjectableDef=o.Qb({factory:function(){return new e(o.Rb(g.b),o.Rb(c.a),o.Rb(d.a))},token:e,providedIn:"root"}),e})();var l=i("xWuP"),u=i("w8xc"),b=i("7ErT"),v=i("TSSN"),f=i("s7LF");let p=(()=>{class e{constructor(e,t){this.goodsCategoryService=e,this.fb=t}initViewService(){this.initForm(),this.getCategoryList()}initForm(){this.formGroup=this.fb.group({name:["",f.o.required],name_vn:[""],code:[""],category_type:[],parent_category:[],is_tab:[!1],desc:[],category_picture:[]})}getCategoryList(){this.goodsCategoryService.getGoodsCategoryList().subscribe(e=>{this.goodsCategoryList=e.results})}onChange(e){if(e.target.files.length>0){const t=e.target.files[0];this.formGroup.get("category_picture").setValue(t)}}onSubmit(){const e=new FormData;e.append("name",this.formGroup.get("name").value),e.append("name_vn",this.formGroup.get("name_vn").value),e.append("code",this.formGroup.get("code").value),e.append("category_type",this.formGroup.get("category_type").value),e.append("parent_category",this.formGroup.get("parent_category").value),e.append("is_tab",this.formGroup.get("is_tab").value),e.append("desc",this.formGroup.get("desc").value),e.append("category_picture",this.formGroup.get("category_picture").value),this.goodsCategoryService.addGoodsCategory(e).subscribe(()=>{console.log("\u6dfb\u52a0\u5546\u54c1\u7c7b\u522b\u6210\u529f")})}}return e.ngInjectableDef=o.Qb({factory:function(){return new e(o.Rb(u.a),o.Rb(f.d))},token:e,providedIn:"root"}),e})();class y{static forChild(){return{ngModule:y,providers:[h,l.a,p]}}}var S=i("iInd");let m=(()=>{class e{constructor(e,t,i){this.storage=e,this.loginViewService=t,this.routerService=i}canActivate(){return this.storage.get("userInfo").then(e=>(this.loginViewService.userInfo=e,!(!this.loginViewService.userInfo||!this.loginViewService.userInfo.is_staff)||(this.routerService.toLogin().then(),!1)))}}return e.ngInjectableDef=o.Qb({factory:function(){return new e(o.Rb(g.b),o.Rb(c.a),o.Rb(d.a))},token:e,providedIn:"root"}),e})(),I=(()=>{class e{constructor(e,t,i){this.storage=e,this.loginViewService=t,this.routerService=i}canActivate(){return this.storage.get("userInfo").then(e=>(this.loginViewService.userInfo=e,!(!this.loginViewService.userInfo||!this.loginViewService.userInfo.is_staff)||(this.routerService.toLogin().then(),!1)))}}return e.ngInjectableDef=o.Qb({factory:function(){return new e(o.Rb(g.b),o.Rb(c.a),o.Rb(d.a))},token:e,providedIn:"root"}),e})(),C=(()=>{class e{constructor(e,t,i){this.storage=e,this.loginViewService=t,this.routerService=i}canActivate(){return this.storage.get("userInfo").then(e=>(this.loginViewService.userInfo=e,!(!this.loginViewService.userInfo||!this.loginViewService.userInfo.is_staff)||(this.routerService.toLogin().then(),!1)))}}return e.ngInjectableDef=o.Qb({factory:function(){return new e(o.Rb(g.b),o.Rb(c.a),o.Rb(d.a))},token:e,providedIn:"root"}),e})(),w=(()=>{class e{constructor(e,t,i){this.storage=e,this.loginViewService=t,this.routerService=i}canActivate(){return this.storage.get("userInfo").then(e=>(this.loginViewService.userInfo=e,!(!this.loginViewService.userInfo||!this.loginViewService.userInfo.is_staff)||(this.routerService.toLogin().then(),!1)))}}return e.ngInjectableDef=o.Qb({factory:function(){return new e(o.Rb(g.b),o.Rb(c.a),o.Rb(d.a))},token:e,providedIn:"root"}),e})(),A=(()=>{class e{constructor(e,t,i){this.storage=e,this.loginViewService=t,this.routerService=i}canActivate(){return this.storage.get("userInfo").then(e=>(this.loginViewService.userInfo=e,!(!this.loginViewService.userInfo||!this.loginViewService.userInfo.is_staff)||(this.routerService.toLogin().then(),!1)))}}return e.ngInjectableDef=o.Qb({factory:function(){return new e(o.Rb(g.b),o.Rb(c.a),o.Rb(d.a))},token:e,providedIn:"root"}),e})();const L=()=>Promise.all([i.e(1),i.e(0),i.e(18)]).then(i.bind(null,"8FR7")).then(e=>e.AdminCategoryListPageModuleNgFactory),R=()=>Promise.all([i.e(1),i.e(21)]).then(i.bind(null,"ajhP")).then(e=>e.AdminGoodsInfoListPageModuleNgFactory),V=()=>Promise.all([i.e(1),i.e(23)]).then(i.bind(null,"RbhX")).then(e=>e.AdminGoodsSkuListPageModuleNgFactory),G=()=>Promise.all([i.e(1),i.e(20)]).then(i.bind(null,"L++q")).then(e=>e.AdminGoodsInListPageModuleNgFactory),_=()=>Promise.all([i.e(1),i.e(22)]).then(i.bind(null,"+G94")).then(e=>e.AdminGoodsOutListPageModuleNgFactory),P=()=>Promise.all([i.e(1),i.e(24)]).then(i.bind(null,"bMr1")).then(e=>e.AdminUsersListPageModuleNgFactory),x=()=>Promise.all([i.e(1),i.e(0),i.e(16)]).then(i.bind(null,"T5oq")).then(e=>e.AdminCategoryAddPageModuleNgFactory),j=()=>i.e(19).then(i.bind(null,"4wN7")).then(e=>e.AdminCategoryUpdatePageModuleNgFactory),B=()=>Promise.all([i.e(1),i.e(0),i.e(17)]).then(i.bind(null,"7nlW")).then(e=>e.AdminCategoryEditPageModuleNgFactory);class F{}i.d(t,"AdminModuleNgFactory",(function(){return M}));var M=o.ob(r,[],(function(e){return o.Ab([o.Bb(512,o.j,o.Z,[[8,[n.a]],[3,o.j],o.v]),o.Bb(4608,s.n,s.m,[o.s,[2,s.B]]),o.Bb(4608,a.b,a.b,[o.x,o.g]),o.Bb(4608,a.Ib,a.Ib,[a.b,o.j,o.p]),o.Bb(4608,a.Mb,a.Mb,[a.b,o.j,o.p]),o.Bb(4608,h,h,[g.b,c.a,d.a]),o.Bb(4608,l.a,l.a,[u.a,d.a,b.a,v.j,a.a]),o.Bb(4608,p,p,[u.a,f.d]),o.Bb(1073742336,s.b,s.b,[]),o.Bb(1073742336,a.Fb,a.Fb,[]),o.Bb(1073742336,y,y,[]),o.Bb(1073742336,S.o,S.o,[[2,S.t],[2,S.m]]),o.Bb(1073742336,F,F,[]),o.Bb(1073742336,r,r,[]),o.Bb(1024,S.k,(function(){return[[{path:"admin-category-list",canActivate:[h],loadChildren:L},{path:"admin-goods-info-list",canActivate:[m],loadChildren:R},{path:"admin-goods-sku-list",canActivate:[I],loadChildren:V},{path:"admin-goods-in-list",canActivate:[C],loadChildren:G},{path:"admin-goods-out-list",canActivate:[w],loadChildren:_},{path:"admin-users-list",canActivate:[A],loadChildren:P},{path:"admin-category-add",loadChildren:x},{path:"admin-category-update",loadChildren:j},{path:"admin-category-edit/:id",loadChildren:B}]]}),[])])}))},xWuP:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var o=i("mrSG"),r=i("w8xc"),n=i("fjz4"),s=i("7ErT"),a=i("ZZ/e"),c=i("8Y7J"),d=i("TSSN");let g=(()=>{class e{constructor(e,t,i,o,r){this.goodsCategoryService=e,this.routerService=t,this.constantService=i,this.translateService=o,this.actionSheetController=r,this.goodsCategoryList=[],this.scrollDisabled=!1,this.loading=!1,this.pageSize=20,this.pageIndex=1}initAdminCategoryListView(){this.pageIndex=1,this.goodsCategoryList=[],this.loadData()}loadData(e){this.loading=!0,setTimeout(()=>{this.goodsCategoryService.getGoodsCategoryList(this.pageIndex).subscribe(t=>{this.pageIndex=this.pageIndex+1;for(const e of t.results)this.goodsCategoryList.push(e);this.loading=!1,this.goodsCategoryList.length===t.count&&(this.scrollDisabled=!0),e&&e.target.complete()})},500)}toGoodsInfoList(e){this.routerService.toAdminGoodsInfoList().then()}toCategoryAdd(){this.routerService.toAdminCategoryAdd().then()}toCategoryEdit(e){this.selectGoodsCategory=e,this.routerService.toAdminCategoryEdit(e.id).then()}doRefresh(e){this.loading=!0,this.pageIndex=1,setTimeout(()=>{this.goodsCategoryService.getGoodsCategoryList(this.pageIndex).subscribe(t=>{this.pageIndex=this.pageIndex+1,this.goodsCategoryList=t.results,this.scrollDisabled=this.goodsCategoryList.length===t.count,this.loading=!1,e.target.complete(),this.constantService.presentToast("\u5237\u65b0\u6210\u529f\uff01").then()})},200)}deleteGoodsCategory(e){this.goodsCategoryService.deleteGoodsCategory(e.id).subscribe(t=>{this.goodsCategoryList=this.goodsCategoryList.filter(t=>{if(t!==e)return t}),this.constantService.presentToast(this.translateService.instant("admin-category-list.deleteSuccess")).then()})}presentActionSheet(e){return o.b(this,void 0,void 0,(function*(){const t=yield this.actionSheetController.create({header:e.name+"("+e.name_vn+")",buttons:[{text:this.translateService.instant("admin-category-list.edit"),icon:"create",handler:()=>{this.toCategoryEdit(e)}},{text:this.translateService.instant("admin-category-list.delete"),role:"destructive",icon:"trash",handler:()=>{this.deleteGoodsCategory(e)}},{text:this.translateService.instant("admin-category-list.cancel"),icon:"close",role:"cancel"}]});yield t.present()}))}}return e.ngInjectableDef=c.Qb({factory:function(){return new e(c.Rb(r.a),c.Rb(n.a),c.Rb(s.a),c.Rb(d.j),c.Rb(a.a))},token:e,providedIn:"root"}),e})()}}]);