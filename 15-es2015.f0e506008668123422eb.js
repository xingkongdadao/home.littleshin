(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{aAsz:function(e,t,n){"use strict";n.r(t);var i=n("8Y7J");class o{}var r=n("pMnS"),l=n("oBZk"),s=n("ZZ/e"),a=n("SVse"),u=n("iInd"),c=n("fjz4");class d{constructor(e,t){this.routerService=e,this.translateService=t,this.appPages=[{title:this.translateService.instant("admin.personal"),url:this.routerService.personal,icon:"person"},{title:this.translateService.instant("admin.dashboard"),url:this.routerService.adminDashboard,icon:"home"},{title:this.translateService.instant("admin.goods-category-list"),url:this.routerService.adminGoodsCategoryList,icon:"list"},{title:this.translateService.instant("admin.goods-info-list"),url:this.routerService.adminGoodsInfoList,icon:"list"},{title:this.translateService.instant("admin.goods-sku-list"),url:this.routerService.adminGoodsSkuList,icon:"list"},{title:this.translateService.instant("admin.goods-in-list"),url:this.routerService.adminGoodsInList,icon:"list"},{title:this.translateService.instant("admin.goods-out-list"),url:this.routerService.adminGoodsOutList,icon:"list"},{title:this.translateService.instant("admin.shop-list"),url:this.routerService.adminShopList,icon:"list"}]}ngOnInit(){}toNavigate(e){this.routerService.toUrl(e).then()}}var h=n("TSSN"),g=i.pb({encapsulation:0,styles:[[""]],data:{}});function b(e){return i.Nb(0,[(e()(),i.rb(0,0,null,null,8,"ion-menu-toggle",[["auto-hide","false"]],null,null,null,l.ub,l.B)),i.qb(1,49152,null,0,s.T,[i.h,i.k,i.x],null,null),(e()(),i.rb(2,0,null,0,6,"ion-item",[],null,[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.toNavigate(e.context.$implicit.url)&&i),i}),l.pb,l.r)),i.qb(3,49152,null,0,s.I,[i.h,i.k,i.x],null,null),(e()(),i.rb(4,0,null,0,1,"ion-icon",[["slot","start"]],null,null,null,l.hb,l.n)),i.qb(5,49152,null,0,s.D,[i.h,i.k,i.x],{name:[0,"name"]},null),(e()(),i.rb(6,0,null,0,2,"ion-label",[],null,null,null,l.qb,l.w)),i.qb(7,49152,null,0,s.O,[i.h,i.k,i.x],null,null),(e()(),i.Lb(8,0,[" "," "]))],(function(e,t){e(t,5,0,t.context.$implicit.icon)}),(function(e,t){e(t,8,0,t.context.$implicit.title)}))}function v(e){return i.Nb(0,[(e()(),i.rb(0,0,null,null,18,"ion-split-pane",[["contentId","main-content"]],null,null,null,l.Fb,l.L)),i.qb(1,49152,null,0,s.ub,[i.h,i.k,i.x],{contentId:[0,"contentId"]},null),(e()(),i.rb(2,0,null,0,14,"ion-menu",[["contentId","main-content"],["type","overlay"]],null,null,null,l.vb,l.z)),i.qb(3,49152,null,0,s.R,[i.h,i.k,i.x],{contentId:[0,"contentId"],type:[1,"type"]},null),(e()(),i.rb(4,0,null,0,6,"ion-header",[],null,null,null,l.gb,l.m)),i.qb(5,49152,null,0,s.C,[i.h,i.k,i.x],null,null),(e()(),i.rb(6,0,null,0,4,"ion-toolbar",[],null,null,null,l.Nb,l.T)),i.qb(7,49152,null,0,s.Db,[i.h,i.k,i.x],null,null),(e()(),i.rb(8,0,null,0,2,"ion-title",[],null,null,null,l.Lb,l.R)),i.qb(9,49152,null,0,s.Bb,[i.h,i.k,i.x],null,null),(e()(),i.Lb(-1,0,["Menu"])),(e()(),i.rb(11,0,null,0,5,"ion-content",[],null,null,null,l.db,l.j)),i.qb(12,49152,null,0,s.v,[i.h,i.k,i.x],null,null),(e()(),i.rb(13,0,null,0,3,"ion-list",[],null,null,null,l.sb,l.x)),i.qb(14,49152,null,0,s.P,[i.h,i.k,i.x],null,null),(e()(),i.gb(16777216,null,0,1,null,b)),i.qb(16,278528,null,0,a.k,[i.M,i.J,i.q],{ngForOf:[0,"ngForOf"]},null),(e()(),i.rb(17,16777216,null,0,1,"ion-router-outlet",[["id","main-content"]],null,null,null,null,null)),i.qb(18,212992,null,0,s.jb,[u.b,i.M,i.j,[8,null],[8,null],s.d,s.Jb,a.h,i.k,u.m,i.x,u.a,[3,s.jb]],null,null)],(function(e,t){var n=t.component;e(t,1,0,"main-content"),e(t,3,0,"main-content","overlay"),e(t,16,0,n.appPages),e(t,18,0)}),null)}function p(e){return i.Nb(0,[(e()(),i.rb(0,0,null,null,1,"app-admin",[],null,null,null,v,g)),i.qb(1,114688,null,0,d,[c.a,h.j],null,null)],(function(e,t){e(t,1,0)}),null)}var f=i.nb("app-admin",d,p,{},{},[]),m=n("dnTq"),S=n("xgBC");let y=(()=>{class e{constructor(e,t,n){this.storage=e,this.loginViewService=t,this.routerService=n}canActivate(){return this.storage.get("userInfo").then(e=>(this.loginViewService.userInfo=e,!(!this.loginViewService.userInfo||!this.loginViewService.userInfo.is_staff)||(this.routerService.toLogin().then(),!1)))}}return e.ngInjectableDef=i.Qb({factory:function(){return new e(i.Rb(S.b),i.Rb(m.a),i.Rb(c.a))},token:e,providedIn:"root"}),e})(),I=(()=>{class e{constructor(e,t,n){this.storage=e,this.loginViewService=t,this.routerService=n}canActivate(){return this.storage.get("userInfo").then(e=>(this.loginViewService.userInfo=e,!(!this.loginViewService.userInfo||!this.loginViewService.userInfo.is_staff)||(this.routerService.toLogin().then(),!1)))}}return e.ngInjectableDef=i.Qb({factory:function(){return new e(i.Rb(S.b),i.Rb(m.a),i.Rb(c.a))},token:e,providedIn:"root"}),e})();var C=n("xWuP"),w=n("w8xc"),L=n("7ErT"),A=n("s7LF");let x=(()=>{class e{constructor(e,t){this.goodsCategoryService=e,this.fb=t}initViewService(){this.initForm(),this.getCategoryList()}initForm(){this.formGroup=this.fb.group({name:["",A.o.required],name_vn:[""],code:[""],category_type:[],parent_category:[],is_tab:[!1],desc:[],category_picture:[]})}getCategoryList(){this.goodsCategoryService.getGoodsCategoryList().subscribe(e=>{this.goodsCategoryList=e.results})}onChange(e){if(e.target.files.length>0){const t=e.target.files[0];this.formGroup.get("category_picture").setValue(t)}}onSubmit(){const e=new FormData;e.append("name",this.formGroup.get("name").value),e.append("name_vn",this.formGroup.get("name_vn").value),e.append("code",this.formGroup.get("code").value),e.append("category_type",this.formGroup.get("category_type").value),e.append("parent_category",this.formGroup.get("parent_category").value),e.append("is_tab",this.formGroup.get("is_tab").value),e.append("desc",this.formGroup.get("desc").value),e.append("category_picture",this.formGroup.get("category_picture").value),this.goodsCategoryService.addGoodsCategory(e).subscribe(()=>{console.log("\u6dfb\u52a0\u5546\u54c1\u7c7b\u522b\u6210\u529f")})}}return e.ngInjectableDef=i.Qb({factory:function(){return new e(i.Rb(w.a),i.Rb(A.d))},token:e,providedIn:"root"}),e})();class R{static forChild(){return{ngModule:R,providers:[y,I,C.a,x]}}}let k=(()=>{class e{constructor(e,t,n){this.storage=e,this.loginViewService=t,this.routerService=n}canActivate(){return this.storage.get("userInfo").then(e=>(this.loginViewService.userInfo=e,!(!this.loginViewService.userInfo||!this.loginViewService.userInfo.is_staff)||(this.routerService.toLogin().then(),!1)))}}return e.ngInjectableDef=i.Qb({factory:function(){return new e(i.Rb(S.b),i.Rb(m.a),i.Rb(c.a))},token:e,providedIn:"root"}),e})(),G=(()=>{class e{constructor(e,t,n){this.storage=e,this.loginViewService=t,this.routerService=n}canActivate(){return this.storage.get("userInfo").then(e=>(this.loginViewService.userInfo=e,!(!this.loginViewService.userInfo||!this.loginViewService.userInfo.is_staff)||(this.routerService.toLogin().then(),!1)))}}return e.ngInjectableDef=i.Qb({factory:function(){return new e(i.Rb(S.b),i.Rb(m.a),i.Rb(c.a))},token:e,providedIn:"root"}),e})(),V=(()=>{class e{constructor(e,t,n){this.storage=e,this.loginViewService=t,this.routerService=n}canActivate(){return this.storage.get("userInfo").then(e=>(this.loginViewService.userInfo=e,!(!this.loginViewService.userInfo||!this.loginViewService.userInfo.is_staff)||(this.routerService.toLogin().then(),!1)))}}return e.ngInjectableDef=i.Qb({factory:function(){return new e(i.Rb(S.b),i.Rb(m.a),i.Rb(c.a))},token:e,providedIn:"root"}),e})(),P=(()=>{class e{constructor(e,t,n){this.storage=e,this.loginViewService=t,this.routerService=n}canActivate(){return this.storage.get("userInfo").then(e=>(this.loginViewService.userInfo=e,!(!this.loginViewService.userInfo||!this.loginViewService.userInfo.is_staff)||(this.routerService.toLogin().then(),!1)))}}return e.ngInjectableDef=i.Qb({factory:function(){return new e(i.Rb(S.b),i.Rb(m.a),i.Rb(c.a))},token:e,providedIn:"root"}),e})(),F=(()=>{class e{constructor(e,t,n){this.storage=e,this.loginViewService=t,this.routerService=n}canActivate(){return this.storage.get("userInfo").then(e=>(this.loginViewService.userInfo=e,!(!this.loginViewService.userInfo||!this.loginViewService.userInfo.is_staff)||(this.routerService.toLogin().then(),!1)))}}return e.ngInjectableDef=i.Qb({factory:function(){return new e(i.Rb(S.b),i.Rb(m.a),i.Rb(c.a))},token:e,providedIn:"root"}),e})();const M=()=>n.e(28).then(n.bind(null,"ZIXW")).then(e=>e.DashboardPageModuleNgFactory),N=()=>Promise.all([n.e(1),n.e(0),n.e(18)]).then(n.bind(null,"8FR7")).then(e=>e.AdminCategoryListPageModuleNgFactory),_=()=>Promise.all([n.e(1),n.e(21)]).then(n.bind(null,"ajhP")).then(e=>e.AdminGoodsInfoListPageModuleNgFactory),j=()=>Promise.all([n.e(1),n.e(23)]).then(n.bind(null,"RbhX")).then(e=>e.AdminGoodsSkuListPageModuleNgFactory),B=()=>Promise.all([n.e(1),n.e(20)]).then(n.bind(null,"L++q")).then(e=>e.AdminGoodsInListPageModuleNgFactory),q=()=>Promise.all([n.e(1),n.e(22)]).then(n.bind(null,"+G94")).then(e=>e.AdminGoodsOutListPageModuleNgFactory),D=()=>Promise.all([n.e(1),n.e(27)]).then(n.bind(null,"bMr1")).then(e=>e.AdminUsersListPageModuleNgFactory),T=()=>Promise.all([n.e(1),n.e(0),n.e(16)]).then(n.bind(null,"T5oq")).then(e=>e.AdminCategoryAddPageModuleNgFactory),Q=()=>n.e(19).then(n.bind(null,"4wN7")).then(e=>e.AdminCategoryUpdatePageModuleNgFactory),E=()=>Promise.all([n.e(1),n.e(0),n.e(17)]).then(n.bind(null,"7nlW")).then(e=>e.AdminCategoryEditPageModuleNgFactory),Z=()=>Promise.all([n.e(1),n.e(0),n.e(26)]).then(n.bind(null,"hM3s")).then(e=>e.AdminShopListPageModuleNgFactory),J=()=>Promise.all([n.e(1),n.e(0),n.e(24)]).then(n.bind(null,"tNLE")).then(e=>e.AdminShopAddPageModuleNgFactory),O=()=>Promise.all([n.e(1),n.e(0),n.e(25)]).then(n.bind(null,"/a9r")).then(e=>e.AdminShopEditPageModuleNgFactory);class z{}n.d(t,"AdminModuleNgFactory",(function(){return W}));var W=i.ob(o,[],(function(e){return i.Ab([i.Bb(512,i.j,i.Z,[[8,[r.a,f]],[3,i.j],i.v]),i.Bb(4608,a.n,a.m,[i.s,[2,a.B]]),i.Bb(4608,s.b,s.b,[i.x,i.g]),i.Bb(4608,s.Ib,s.Ib,[s.b,i.j,i.p]),i.Bb(4608,s.Mb,s.Mb,[s.b,i.j,i.p]),i.Bb(4608,y,y,[S.b,m.a,c.a]),i.Bb(4608,I,I,[S.b,m.a,c.a]),i.Bb(4608,C.a,C.a,[w.a,c.a,L.a,h.j,s.a]),i.Bb(4608,x,x,[w.a,A.d]),i.Bb(1073742336,a.b,a.b,[]),i.Bb(1073742336,s.Fb,s.Fb,[]),i.Bb(1073742336,R,R,[]),i.Bb(1073742336,u.o,u.o,[[2,u.t],[2,u.m]]),i.Bb(1073742336,z,z,[]),i.Bb(1073742336,o,o,[]),i.Bb(1024,u.k,(function(){return[[{path:"",component:d,children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",loadChildren:M},{path:"admin-category-list",canActivate:[y],loadChildren:N},{path:"admin-goods-info-list",canActivate:[k],loadChildren:_},{path:"admin-goods-sku-list",canActivate:[G],loadChildren:j},{path:"admin-goods-in-list",canActivate:[V],loadChildren:B},{path:"admin-goods-out-list",canActivate:[P],loadChildren:q},{path:"admin-users-list",canActivate:[F],loadChildren:D},{path:"admin-category-add",loadChildren:T},{path:"admin-category-update",loadChildren:Q},{path:"admin-category-edit/:id",loadChildren:E},{path:"admin-shop-list",canActivate:[I],loadChildren:Z},{path:"admin-shop-add",canActivate:[I],loadChildren:J},{path:"admin-shop-edit/:id",loadChildren:O}]}]]}),[])])}))},xWuP:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("mrSG"),o=n("w8xc"),r=n("fjz4"),l=n("7ErT"),s=n("ZZ/e"),a=n("8Y7J"),u=n("TSSN");let c=(()=>{class e{constructor(e,t,n,i,o){this.goodsCategoryService=e,this.routerService=t,this.constantService=n,this.translateService=i,this.actionSheetController=o,this.goodsCategoryList=[],this.scrollDisabled=!1,this.loading=!1,this.pageSize=20,this.pageIndex=1}initAdminCategoryListView(){this.pageIndex=1,this.goodsCategoryList=[],this.loadData()}loadData(e){this.loading=!0,setTimeout(()=>{this.goodsCategoryService.getGoodsCategoryList(this.pageIndex).subscribe(t=>{this.pageIndex=this.pageIndex+1;for(const e of t.results)this.goodsCategoryList.push(e);this.loading=!1,this.goodsCategoryList.length===t.count&&(this.scrollDisabled=!0),e&&e.target.complete()})},500)}toGoodsInfoList(e){this.routerService.toAdminGoodsInfoList().then()}toCategoryAdd(){this.routerService.toAdminGoodsCategoryAdd().then()}toCategoryEdit(e){this.selectGoodsCategory=e,this.routerService.toAdminCategoryEdit(e.id).then()}doRefresh(e){this.loading=!0,this.pageIndex=1,setTimeout(()=>{this.goodsCategoryService.getGoodsCategoryList(this.pageIndex).subscribe(t=>{this.pageIndex=this.pageIndex+1,this.goodsCategoryList=t.results,this.scrollDisabled=this.goodsCategoryList.length===t.count,this.loading=!1,e.target.complete(),this.constantService.presentToast("\u5237\u65b0\u6210\u529f\uff01").then()})},200)}deleteGoodsCategory(e){this.goodsCategoryService.deleteGoodsCategory(e.id).subscribe(t=>{this.goodsCategoryList=this.goodsCategoryList.filter(t=>{if(t!==e)return t}),this.constantService.presentToast(this.translateService.instant("admin-category-list.deleteSuccess")).then()})}presentActionSheet(e){return i.b(this,void 0,void 0,(function*(){const t=yield this.actionSheetController.create({header:e.name+"("+e.name_vn+")",buttons:[{text:this.translateService.instant("admin-category-list.edit"),icon:"create",handler:()=>{this.toCategoryEdit(e)}},{text:this.translateService.instant("admin-category-list.delete"),role:"destructive",icon:"trash",handler:()=>{this.deleteGoodsCategory(e)}},{text:this.translateService.instant("admin-category-list.cancel"),icon:"close",role:"cancel"}]});yield t.present()}))}}return e.ngInjectableDef=a.Qb({factory:function(){return new e(a.Rb(o.a),a.Rb(r.a),a.Rb(l.a),a.Rb(u.j),a.Rb(s.a))},token:e,providedIn:"root"}),e})()}}]);